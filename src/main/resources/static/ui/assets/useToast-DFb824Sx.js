import{d as _,r as b,C as D,D as L,l as I,b as m,g as k,p as j,a as g,f as C,e as l,i as w,I as y,t as h,j as S,n as P,T as F,V as M,aa as R,u as A,c as E,ab as x,o as N,F as B,q as K,ac as q,a5 as V,B as J}from"./index-RpMqQ55D.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";class U{static async handleResponse(t){if(!t.ok)try{const e=await t.json(),s=e.error||e.message||`API request failed: ${t.status}`,i=new Error(s);throw e.errorCode&&(i.errorCode=e.errorCode),i}catch(e){throw e instanceof Error?e:new Error(`API request failed: ${t.status} ${t.statusText}`)}return t}static async createOrUpdatePlanTemplateWithTool(t){try{const e=await fetch("/api/plan-template/create-or-update-with-tool",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return await(await this.handleResponse(e)).json()}catch(e){throw console.error("Failed to create or update plan template with tool:",e),e}}static async getPlanTemplateConfigVO(t){try{const e=await fetch(`/api/plan-template/${t}/config`);return await(await this.handleResponse(e)).json()}catch(e){throw console.error("Failed to get plan template config VO:",e),e}}static async getAllPlanTemplateConfigVOs(){try{const t=await fetch("/api/plan-template/list-config");return await(await this.handleResponse(t)).json()}catch(t){throw console.error("Failed to get all plan template config VOs:",t),t}}static async deletePlanTemplate(t){try{const e=await fetch("/api/plan-template/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:t})});return await(await this.handleResponse(e)).json()}catch(e){throw console.error("Failed to delete plan template:",e),e}}static async exportAllPlanTemplates(){try{const t=await fetch("/api/plan-template/export-all");return await(await this.handleResponse(t)).json()}catch(t){throw console.error("Failed to export all plan templates:",t),t}}static async importPlanTemplates(t){try{const e=await fetch("/api/plan-template/import-all",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return await(await this.handleResponse(e)).json()}catch(e){throw console.error("Failed to import plan templates:",e),e}}static async generatePlanTemplateId(){try{const t=await fetch("/api/plan-template/generate-plan-template-id",{method:"GET",headers:{"Content-Type":"application/json"}});return(await(await this.handleResponse(t)).json()).planTemplateId}catch(t){throw console.error("Failed to generate plan template ID:",t),t}}}const z={class:"toast-header"},G={class:"toast-title"},H={class:"toast-content"},W=_({name:"ToastNotification",__name:"Toast",setup(r,{expose:t}){const e=b(!1),s=b(""),i=b("success"),v=b("carbon:checkmark"),f=b(3e3),a=(u,n="success",c=3e3)=>{s.value=u,i.value=n,v.value=n==="success"?"carbon:checkmark":"carbon:error",f.value=c,e.value=!0},o=()=>{e.value=!1},d=u=>{e.value&&(u.key==="Enter"||u.key==="Escape")&&(u.preventDefault(),u.stopPropagation(),o())};return D(e,u=>{u?document.addEventListener("keydown",d):document.removeEventListener("keydown",d)}),L(()=>{document.removeEventListener("keydown",d)}),t({show:a}),(u,n)=>(m(),I(M,{to:"body"},[k(F,{name:"modal"},{default:j(()=>[e.value?(m(),g("div",{key:0,class:"toast-overlay",onClick:o},[l("div",{class:P(["toast-modal",`toast--${i.value}`]),onClick:n[0]||(n[0]=S(()=>{},["stop"]))},[l("div",z,[k(w(y),{icon:v.value,class:"toast-icon"},null,8,["icon"]),l("span",G,h(i.value==="success"?"Success":"Error"),1)]),l("div",H,[l("span",null,h(s.value),1)]),l("div",{class:"toast-actions"},[l("button",{class:"toast-btn toast-btn--primary",onClick:o},"Confirm")])],2)])):C("",!0)]),_:1})]))}}),Q=O(W,[["__scopeId","data-v-02446227"]]);let $=null;const fe=()=>{if(!$){const r=R(Q),t=document.createElement("div");document.body.appendChild(t),$=r.mount(t)}return{success:(r,t)=>{$?.show(r,"success",t)},error:(r,t)=>{$?.show(r,"error",t)}}},X={class:"language-switcher"},Y=["title"],Z={class:"current-lang"},ee={class:"dropdown-header"},te={class:"language-options"},ae=["disabled","onClick"],se={class:"lang-code"},oe={class:"lang-name"},ne=_({__name:"LanguageSwitcher",setup(r){const{locale:t}=A(),e=b(!1),s=E(()=>t.value),i=E(()=>x.opts),v=E(()=>{const n=i.value.find(c=>c.value===s.value);return n?n.title:"Unknown"}),f=()=>{e.value=!e.value},a=b(!1),o=async n=>{if(!(a.value||s.value===n))try{a.value=!0,await q(n),e.value=!1}catch(c){console.error("Failed to change language:",c),e.value=!1}finally{a.value=!1}},d=n=>{n.target.closest(".language-switcher")||(e.value=!1)},u=n=>{n.key==="Escape"&&(e.value=!1)};return N(()=>{document.addEventListener("click",d),document.addEventListener("keydown",u)}),L(()=>{document.removeEventListener("click",d),document.removeEventListener("keydown",u)}),(n,c)=>(m(),g("div",X,[l("button",{class:"language-btn",onClick:f,title:n.$t("language.switch")},[k(w(y),{icon:"carbon:translate",width:"18"}),l("span",Z,h(v.value),1),k(w(y),{icon:e.value?"carbon:chevron-up":"carbon:chevron-down",width:"14",class:"chevron"},null,8,["icon"])],8,Y),e.value?(m(),g("div",{key:0,class:"language-dropdown",onClick:c[1]||(c[1]=S(()=>{},["stop"]))},[l("div",ee,[l("span",null,h(n.$t("language.switch")),1),l("button",{class:"close-btn",onClick:c[0]||(c[0]=p=>e.value=!1)},[k(w(y),{icon:"carbon:close",width:"16"})])]),l("div",te,[(m(!0),g(B,null,K(i.value,p=>(m(),g("button",{key:p.value,class:P(["language-option",{active:s.value===p.value,loading:a.value&&s.value!==p.value}]),disabled:a.value,onClick:T=>o(p.value)},[l("span",se,h(p.value.toUpperCase()),1),l("span",oe,h(p.title),1),a.value&&s.value!==p.value?(m(),I(w(y),{key:0,icon:"carbon:circle-dash",width:"16",class:"loading-icon"})):s.value===p.value?(m(),I(w(y),{key:1,icon:"carbon:checkmark",width:"16",class:"check-icon"})):C("",!0)],10,ae))),128))])])):C("",!0),e.value?(m(),g("div",{key:1,class:"backdrop",onClick:c[2]||(c[2]=p=>e.value=!1)})):C("",!0)]))}}),he=O(ne,[["__scopeId","data-v-6951f85e"]]),le={class:"modal-header"},re={class:"header-content"},ce=["title"],ie={class:"modal-content"},ue={class:"modal-footer"},de=_({name:"ModalDialog",__name:"index",props:{modelValue:{type:Boolean,required:!0},title:{type:String,default:""},statusIcon:{type:String,default:""},statusIconClass:{type:String,default:""},statusIconTitle:{type:String,default:""}},emits:["update:modelValue","confirm"],setup(r,{emit:t}){const e=r,s=t,i=a=>{a.target===a.currentTarget&&(a.stopPropagation(),a.preventDefault())},v=a=>{if(!a||!(a instanceof HTMLElement))return!1;const o=a.tagName.toLowerCase(),d=a.isContentEditable;return o==="input"||o==="textarea"||o==="select"||d},f=a=>{e.modelValue&&(v(a.target)||(a.key==="Escape"?s("update:modelValue",!1):a.key==="Enter"&&!a.shiftKey&&!a.ctrlKey&&!a.metaKey&&s("confirm")))};return N(()=>{document.addEventListener("keydown",f)}),L(()=>{document.removeEventListener("keydown",f)}),(a,o)=>(m(),I(M,{to:"body"},[k(F,{name:"modal"},{default:j(()=>[r.modelValue?(m(),g("div",{key:0,class:"modal-overlay",onClick:i},[l("div",{class:"modal-container",onClick:o[3]||(o[3]=S(()=>{},["stop"]))},[l("div",le,[l("div",re,[l("h3",null,h(r.title),1),r.statusIcon?(m(),g("div",{key:0,class:P(["status-icon",r.statusIconClass]),title:r.statusIconTitle},[k(w(y),{icon:r.statusIcon,width:"16"},null,8,["icon"])],10,ce)):C("",!0)]),l("button",{class:"close-btn",onClick:o[0]||(o[0]=d=>a.$emit("update:modelValue",!1))},[k(w(y),{icon:"carbon:close"})])]),l("div",ie,[V(a.$slots,"default",{},void 0,!0)]),l("div",ue,[V(a.$slots,"footer",{},()=>[l("button",{class:"cancel-btn",onClick:o[1]||(o[1]=d=>a.$emit("update:modelValue",!1))},h(a.$t("common.cancel")),1),l("button",{class:"confirm-btn",onClick:o[2]||(o[2]=d=>a.$emit("confirm"))},h(a.$t("common.confirm")),1)],!0)])])])):C("",!0)]),_:3})]))}}),ve=O(de,[["__scopeId","data-v-8607d649"]]);function ge(){return{handleImport:async(t,e={})=>{const s=t.target,i=s.files?.[0];if(!i)return;const{showConfirm:v=!1,confirmMessage:f,onSuccess:a,onError:o,onReload:d,onSingleTemplateImported:u}=e;try{const n=await i.text(),c=JSON.parse(n);if(!Array.isArray(c)){const T="Invalid format: expected an array of plan templates";if(s.value="",o)o(T);else throw new Error(T);return}if(v&&f&&!confirm(f)){s.value="";return}const p=await U.importPlanTemplates(c);if(p.success){if(a&&await a(p,c),d&&await d(),u&&p.successCount===1&&c.length===1){const T=c[0];T.planTemplateId&&await u(T)}}else o?o("Import failed"):console.error("Import failed")}catch(n){console.error("Failed to import plan templates:",n);const c=n instanceof Error?n.message:"Failed to import plan templates";o&&o(c)}finally{s.value=""}}}}function we(){const r=J({show:!1,text:"",type:"success"});return{toast:r,showToast:(e,s="success")=>{console.log(`Showing toast: ${e}, Type: ${s}`),r.text=e,r.type=s,r.show=!0;const i=s==="error"?5e3:3e3;console.log(`Toast will be automatically hidden after ${i}ms`),setTimeout(()=>{r.show=!1,console.log("Toast hidden")},i)}}}export{he as L,ve as M,U as P,ge as a,we as b,fe as u};
//# sourceMappingURL=useToast-DFb824Sx.js.map
